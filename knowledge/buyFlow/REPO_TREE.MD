# BUY FLOW PROGRESS SUMMARY

# Legend
âœ… = done
ðŸ§© = in progress
â¬œ = todo

## Milestone Status (as of 2024-12-19)
- âœ… **M1 - Foundation**: Complete - All config files ready, Edge functions deployed
- âœ… **M2 - Providers & Addresses**: Complete - 0x, Biconomy, Transak, contract addresses configured
- ðŸ§© **M3 - Reference Pool & Pricing**: In Progress - Ready to implement pricing logic
- ðŸ§© **M7 - Fiat Onramp**: Enhanced - Transak webhook integration started
- â¬œ **M4-M6, M8-M9**: Pending - Quote endpoint, execution, frontend modal, observability

---

â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ debug/
â”‚   â”‚   â”‚   â”œâ”€â”€ BalanceDebugger.tsx
â”‚   â”‚   â”‚   â””â”€â”€ EnvironmentChecker.tsx
â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â””â”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NetworkIndicator.tsx
â”‚   â”‚   â”‚   â””â”€â”€ QuoteBreakdown.tsx                 # ðŸ§© [M4.4] Scaffolded - TODO: Implement quote display logic
â”‚   â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”‚   â”œâ”€â”€ AIProfilingModal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileCompletionModal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SurveyModal.tsx
â”‚   â”‚   â”‚   â””â”€â”€ UserProfile.tsx
â”‚   â”‚   â””â”€â”€ wallet/
â”‚   â”‚       â”œâ”€â”€ FaucetLinks.tsx
â”‚   â”‚       â”œâ”€â”€ NetworkMismatchWarning.tsx
â”‚   â”‚       â”œâ”€â”€ TokenBalance.tsx
â”‚   â”‚       â”œâ”€â”€ BuyWfounderModal.tsx                  # ðŸ§© [M6.1] Scaffolded - TODO: Implement 3-step buy flow
â”‚   â”‚       â”œâ”€â”€ GaslessBadge.tsx                   # ðŸ§© [M6.3] Scaffolded - TODO: Implement gas fee display
â”‚   â”‚       â””â”€â”€ OnrampWidget.tsx                   # ðŸ§© [M7.1] Scaffolded - TODO: Integrate Transak/Ramp widget
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ env.ts                                 # âœ… [M1.2] Complete - All provider API keys configured (0x âœ…, Biconomy âœ…, Transak âœ…)
â”‚   â”‚   â”œâ”€â”€ networks.ts                            # âœ… [M1.3] Complete - Polygon mainnet + Amoy configured
â”‚   â”‚   â””â”€â”€ contracts.ts                           # âœ… [M1.1] Complete - All contract addresses configured in .env
â”‚   â”‚                                              # âœ… [M2.2] Complete - WFOUNDER/WETH/router addresses configured
â”‚   â”‚                                              # âœ… [M2.3] Complete - QuickSwap v2 WETH/WFOUNDER 50/50 pool address (REF_POOL_ADDRESS) + QuickSwap router/factory configured
â”‚   â”‚                                              # âœ… [M3.1] Complete - Reference DEX = QuickSwap v2; policy bounds configured
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”œâ”€â”€ Web3AuthContext.ts
â”‚   â”‚   â”œâ”€â”€ Web3AuthProvider.tsx
â”‚   â”‚   â””â”€â”€ BuyFlowProvider.tsx                    # TODO [M6.2] (optional) shared state for modal steps
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â””â”€â”€ profiler/
â”‚   â”‚       â””â”€â”€ FounderProfiler.tsx
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ ethersRPC.ts
â”‚   â”‚   â”œâ”€â”€ useAdmin.ts
â”‚   â”‚   â”œâ”€â”€ useSupabaseUser.ts
â”‚   â”‚   â”œâ”€â”€ useTokenService.ts
â”‚   â”‚   â”œâ”€â”€ useWeb3Auth.ts
â”‚   â”‚   â”œâ”€â”€ useBuyWfounder.ts                         # ðŸ§© [M5.5] Scaffolded - TODO: Implement actual buy orchestration
â”‚   â”‚   â”œâ”€â”€ useQuote.ts                            # ðŸ§© [M4.2] Scaffolded - TODO: Implement quote API calls
â”‚   â”‚   â””â”€â”€ useOnrampEvents.ts                     # ðŸ§© [M7.3] Scaffolded - TODO: Implement onramp event handling
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ database.types.ts
â”‚   â”‚   â””â”€â”€ supabase.ts
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ AdminLoginPage.tsx
â”‚   â”‚   â”œâ”€â”€ AdminPage.tsx
â”‚   â”‚   â””â”€â”€ HomePage.tsx                           # TODO [M6.1] Add "Buy WFOUNDER" CTA entry point
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ adminService.ts
â”‚   â”‚   â”œâ”€â”€ emailService.ts
â”‚   â”‚   â”œâ”€â”€ profilerLLM.ts
â”‚   â”‚   â”œâ”€â”€ profilerService.ts
â”‚   â”‚   â”œâ”€â”€ userService.ts
â”‚   â”‚   â”œâ”€â”€ analytics.ts                           # ðŸ§© [M6.4] Scaffolded - TODO: Implement actual analytics events
â”‚   â”‚   â”œâ”€â”€ onrampService.ts                       # ðŸ§© [M7.4] Scaffolded - TODO: Implement onramp integration
â”‚   â”‚   â”œâ”€â”€ paymasterService.ts                    # ðŸ§© [M5.4] Scaffolded - TODO: Implement Biconomy integration
â”‚   â”‚   â””â”€â”€ swapService.ts                         # ðŸ§© [M4.2] Scaffolded - TODO: Implement actual swap API calls
â”‚   â””â”€â”€ types/
â”‚       â”œâ”€â”€ auth.ts
â”‚       â”œâ”€â”€ buy.ts                                 # ðŸ§© [M4.3] Scaffolded - TODO: Add zod validation schemas
â”‚       â””â”€â”€ rollup-plugin-polyfill-node.d.ts
â”œâ”€â”€ supabase/
â”‚   â””â”€â”€ functions/
â”‚       â”œâ”€â”€ _shared/
â”‚       â”‚   â”œâ”€â”€ cors.ts
â”‚       â”‚   â”œâ”€â”€ hmac.ts                            # ðŸ§© [M7.2] Scaffolded - TODO: Implement actual HMAC verification
â”‚       â”‚   â”œâ”€â”€ paymaster.ts                       # ðŸ§© [M5.1] Scaffolded - TODO: Implement Biconomy helpers
â”‚       â”‚   â””â”€â”€ pricing.ts                         # ðŸ§© [M3.2] Scaffolded - TODO: Implement pool price fetching
â”‚       â”œâ”€â”€ openai-chat/
â”‚       â”œâ”€â”€ send-approval-email/
â”‚       â”œâ”€â”€ send-welcome-email/
â”‚       â”œâ”€â”€ execute/                               # ðŸ§© [M5.2] Scaffolded - TODO: Implement actual swap execution
â”‚       â”œâ”€â”€ onramp-webhook/                        # ðŸ§© [M7.2] Enhanced - TRANSAK_API_KEY integrated, webhook parsing added
â”‚       â”œâ”€â”€ quote/                                 # ðŸ§© [M4.1] Scaffolded - TODO: Implement 0x quote API
â”‚       â””â”€â”€ status/                                # ðŸ§© [M5.3] Scaffolded - TODO: Implement transaction status checking
â”œâ”€â”€ knowledge/
â”‚   â””â”€â”€ FounderProfiler/
â”œâ”€â”€ public/
â”œâ”€â”€ Configuration files
â””â”€â”€ README-BUY-FLOW.md                              # TODO [M1.1] Overview, flags, runbooks & milestones
â””â”€â”€ .env / Supabase Secrets                # REF_POOL_ADDRESS, ALLOWED_ROUTERS, policy caps (CAP_IN_WETH, CAP_PER_WALLET)